shadow$provide.module$node_modules$vega_util$build$vega_util=function(global$jscomp$0,require,module,exports){(function(global,factory){"object"===typeof exports&&"undefined"!==typeof module?factory(exports):"function"===typeof define&&define.amd?define(["exports"],factory):(global="undefined"!==typeof globalThis?globalThis:global||self,factory(global.vega={}))})(this,function(exports){function accessor(fn,fields,name){fn.fields=fields||[];fn.fname=name;return fn}function accessorFields(fn){return null==
fn?null:fn.fields}function getter(path){return 1===path.length?get1(path[0]):getN(path)}function error(message){throw Error(message);}function splitAccessPath(p){function push(){path.push(s+p.substring(i,j));s="";i=j+1}const path=[],n=p.length;let q=null,b=0,s="",i,j,c;p+="";for(i=j=0;j<n;++j)(c=p[j],"\\"===c)?(s+=p.substring(i,j),s+=p.substring(++j,++j),i=j):c===q?(push(),q=null,b=-1):q||(i===b&&'"'===c?(i=j+1,q=c):i===b&&"'"===c?(i=j+1,q=c):"."!==c||b?"["===c?(j>i&&push(),b=i=j+1):"]"===c&&(b||
error("Access path missing open bracket: "+p),0<b&&push(),b=0,i=j+1):j>i?push():i=j+1);b&&error("Access path missing closing bracket: "+p);q&&error("Access path missing closing quote: "+p);j>i&&(j++,push());return path}function field(field,name,opt){const path=splitAccessPath(field);field=1===path.length?path[0]:field;return accessor((opt&&opt.get||getter)(path),[field],name||field)}function log$1(method,level,input){level=[level].concat([].slice.call(input));console[method].apply(console,level)}
function isObject(_){return _===Object(_)}function writeConfig(output,key,value,recurse){if("__proto__"!==key){var k;if(isObject(value)&&!isArray(value))for(k in output=isObject(output[key])?output[key]:output[key]={},value)recurse&&(!0===recurse||recurse[k])?writeConfig(output,k,value[k]):"__proto__"!==k&&(output[k]=value[k]);else output[key]=value}}function mergeNamed(a,b){function add(_){map[_.name]||(map[_.name]=1,out.push(_))}if(null==a)return b;const map={},out=[];b.forEach(add);a.forEach(add);
return out}function peek(array){return array[array.length-1]}function toNumber(_){return null==_||""===_?null:+_}function pan(domain,delta,lift,ground){const d0=lift(domain[0]);domain=lift(peek(domain));delta*=domain-d0;return[ground(d0-delta),ground(domain-delta)]}function zoom(domain,anchor,scale,lift,ground){const d0=lift(domain[0]);domain=lift(peek(domain));anchor=null!=anchor?lift(anchor):(d0+domain)/2;return[ground(anchor+(d0-anchor)*scale),ground(anchor+(domain-anchor)*scale)]}function array$jscomp$0(_){return null!=
_?isArray(_)?_:[_]:[]}function isFunction(_){return"function"===typeof _}function extend(_){for(let x,k,i=1,len=arguments.length;i<len;++i)for(k in x=arguments[i],x)_[k]=x[k];return _}function has(object,property){return hop.call(object,property)}function isDate(_){return"[object Date]"===Object.prototype.toString.call(_)}function isNumber(_){return"number"===typeof _}function isString(_){return"string"===typeof _}function repeat(str,reps){let s="";for(;0<=--reps;)s+=str;return s}function $(x){return isArray(x)?
"["+x.map($)+"]":isObject(x)||isString(x)?JSON.stringify(x).replace("\u2028","\\u2028").replace("\u2029","\\u2029"):x}const get1=field=>function(obj){return obj[field]},getN=path=>{const len=path.length;return function(obj){for(let i=0;i<len;++i)obj=obj[path[i]];return obj}},id=field("id"),identity=accessor(_=>_,[],"identity"),zero=accessor(()=>0,[],"zero"),one=accessor(()=>1,[],"one"),truthy=accessor(()=>!0,[],"true"),falsy=accessor(()=>!1,[],"false");var isArray=Array.isArray;const exp=sign=>x=>
sign*Math.exp(x),log=sign=>x=>Math.log(sign*x),symlog=c=>x=>Math.sign(x)*Math.log1p(Math.abs(x/c)),symexp=c=>x=>Math.sign(x)*Math.expm1(Math.abs(x))*c,pow=exponent=>x=>0>x?-Math.pow(-x,exponent):Math.pow(x,exponent),ascending=(u,v)=>(u<v||null==u)&&null!=v?-1:(u>v||null==v)&&null!=u?1:(v=v instanceof Date?+v:v,u=u instanceof Date?+u:u)!==u&&v===v?-1:v!==v&&u===u?1:0,comparator=(fields,orders)=>1===fields.length?compare1(fields[0],orders[0]):compareN(fields,orders,fields.length),compare1=(field,order)=>
function(a,b){return ascending(field(a),field(b))*order},compareN=(fields,orders,n)=>{orders.push(0);return function(a,b){var f=0;let i=-1;for(;0===f&&++i<n;)f=fields[i],f=ascending(f(a),f(b));return f*orders[i]}},hop=Object.prototype.hasOwnProperty,NULL={},defaultParser=_=>isNumber(_)?_:isDate(_)?_:Date.parse(_);exports.Debug=4;exports.Error=1;exports.Info=3;exports.None=0;exports.Warn=2;exports.accessor=accessor;exports.accessorFields=accessorFields;exports.accessorName=function(fn){return null==
fn?null:fn.fname};exports.array=array$jscomp$0;exports.ascending=ascending;exports.clampRange=function(range,min,max){let lo=range[0];range=range[1];let span;range<lo&&(span=range,range=lo,lo=span);span=range-lo;return span>=max-min?[min,max]:[lo=Math.min(Math.max(lo,min),max-span),lo+span]};exports.compare=function(fields,orders,opt){opt=opt||{};orders=array$jscomp$0(orders)||[];const ord=[],get=[],fmap={},gen=opt.comparator||comparator;array$jscomp$0(fields).forEach((f,i)=>{null!=f&&(ord.push("descending"===
orders[i]?-1:1),get.push(f=isFunction(f)?f:field(f,null,opt)),(accessorFields(f)||[]).forEach(_=>fmap[_]=1))});return 0===get.length?null:accessor(gen(get,ord),Object.keys(fmap))};exports.constant=function(_){return isFunction(_)?_:()=>_};exports.debounce=function(delay,handler){let tid;return e=>{tid&&clearTimeout(tid);tid=setTimeout(()=>(handler(e),tid=null),delay)}};exports.error=error;exports.extend=extend;exports.extent=function(array,f){let i=0,n,v,min,max;if(array&&(n=array.length))if(null==
f){for(v=array[i];i<n&&(null==v||v!==v);v=array[++i]);for(min=max=v;i<n;++i)v=array[i],null!=v&&(v<min&&(min=v),v>max&&(max=v))}else{for(v=f(array[i]);i<n&&(null==v||v!==v);v=f(array[++i]));for(min=max=v;i<n;++i)v=f(array[i]),null!=v&&(v<min&&(min=v),v>max&&(max=v))}return[min,max]};exports.extentIndex=function(array,f){const n=array.length;let i=-1,a,b,c,u,v;if(null==f){for(;++i<n;)if(b=array[i],null!=b&&b>=b){a=c=b;break}if(i===n)return[-1,-1];for(u=v=i;++i<n;)b=array[i],null!=b&&(a>b&&(a=b,u=i),
c<b&&(c=b,v=i))}else{for(;++i<n;)if(b=f(array[i],i,array),null!=b&&b>=b){a=c=b;break}if(i===n)return[-1,-1];for(u=v=i;++i<n;)b=f(array[i],i,array),null!=b&&(a>b&&(a=b,u=i),c<b&&(c=b,v=i))}return[u,v]};exports.falsy=falsy;exports.fastmap=function(input){function has$1(key){return has(obj,key)&&obj[key]!==NULL}let obj={},test;const map={size:0,empty:0,object:obj,has:has$1,get(key){return has$1(key)?obj[key]:void 0},set(key,value){has$1(key)||(++map.size,obj[key]===NULL&&--map.empty);obj[key]=value;
return this},delete(key){has$1(key)&&(--map.size,++map.empty,obj[key]=NULL);return this},clear(){map.size=map.empty=0;map.object=obj={}},test(_){return arguments.length?(test=_,map):test},clean(){const next={};let size=0;for(const key in obj){const value=obj[key];value===NULL||test&&test(value)||(next[key]=value,++size)}map.size=size;map.empty=0;map.object=obj=next}};input&&Object.keys(input).forEach(key=>{map.set(key,input[key])});return map};exports.field=field;exports.flush=function(range,value,
threshold,left,right,center){if(!threshold&&0!==threshold)return center;threshold=+threshold;let a=range[0],b=peek(range);b<a&&(range=a,a=b,b=range);range=Math.abs(value-a);value=Math.abs(b-value);return range<value&&range<=threshold?left:value<=threshold?right:center};exports.hasOwnProperty=has;exports.id=id;exports.identity=identity;exports.inherits=function(child,parent,members){parent=child.prototype=Object.create(parent.prototype);Object.defineProperty(parent,"constructor",{value:child,writable:!0,
enumerable:!0,configurable:!0});return extend(parent,members)};exports.inrange=function(value,range,left,right){let r0=range[0];range=range[range.length-1];let t;r0>range&&(t=r0,r0=range,range=t);return(void 0===left||left?r0<=value:r0<value)&&(void 0===right||right?value<=range:value<range)};exports.isArray=isArray;exports.isBoolean=function(_){return"boolean"===typeof _};exports.isDate=isDate;exports.isFunction=isFunction;exports.isIterable=function(_){return _&&isFunction(_[Symbol.iterator])};
exports.isNumber=isNumber;exports.isObject=isObject;exports.isRegExp=function(_){return"[object RegExp]"===Object.prototype.toString.call(_)};exports.isString=isString;exports.key=function(fields,flat,opt){fields&&(fields=flat?array$jscomp$0(fields).map(f=>f.replace(/\\(.)/g,"$1")):array$jscomp$0(fields));const len=fields&&fields.length,gen=opt&&opt.get||getter;opt=f=>gen(flat?[f]:splitAccessPath(f));if(len)if(1===len){const get=opt(fields[0]);opt=function(_){return""+get(_)}}else{const get=fields.map(opt);
opt=function(_){let s=""+get[0](_),i=0;for(;++i<len;)s+="|"+get[i](_);return s}}else opt=function(){return""};return accessor(opt,fields,"key")};exports.lerp=function(array,frac){const lo=array[0];array=peek(array);return(frac=+frac)?1===frac?array:lo+frac*(array-lo):lo};exports.logger=function(_$jscomp$0,method,handler=log$1){let level=_$jscomp$0||0;return{level(_){return arguments.length?(level=+_,this):level},error(){1<=level&&handler(method||"error","ERROR",arguments);return this},warn(){2<=level&&
handler(method||"warn","WARN",arguments);return this},info(){3<=level&&handler(method||"log","INFO",arguments);return this},debug(){4<=level&&handler(method||"log","DEBUG",arguments);return this}}};exports.lruCache=function(maxsize){maxsize=+maxsize||1E4;let curr,prev,size;const clear=()=>{curr={};prev={};size=0},update=(key,value)=>{++size>maxsize&&(prev=curr,curr={},size=1);return curr[key]=value};clear();return{clear,has:key=>has(curr,key)||has(prev,key),get:key=>has(curr,key)?curr[key]:has(prev,
key)?update(key,prev[key]):void 0,set:(key,value)=>has(curr,key)?curr[key]=value:update(key,value)}};exports.merge=function(compare,array0,array1,output){const n0=array0.length,n1=array1.length;if(!n1)return array0;if(!n0)return array1;output=output||new array0.constructor(n0+n1);let i0=0,i1=0,i=0;for(;i0<n0&&i1<n1;++i)output[i]=0<compare(array0[i0],array1[i1])?array1[i1++]:array0[i0++];for(;i0<n0;++i0,++i)output[i]=array0[i0];for(;i1<n1;++i1,++i)output[i]=array1[i1];return output};exports.mergeConfig=
function(...configs){return configs.reduce((out,source)=>{for(const key in source)"signals"===key?out.signals=mergeNamed(out.signals,source.signals):writeConfig(out,key,source[key],"legend"===key?{layout:1}:"style"===key?!0:null);return out},{})};exports.one=one;exports.pad=function(str,length,padchar,align){padchar=padchar||" ";str+="";length-=str.length;return 0>=length?str:"left"===align?repeat(padchar,length)+str:"center"===align?repeat(padchar,~~(length/2))+str+repeat(padchar,Math.ceil(length/
2)):str+repeat(padchar,length)};exports.panLinear=function(domain,delta){return pan(domain,delta,toNumber,identity)};exports.panLog=function(domain,delta){var sign=Math.sign(domain[0]);return pan(domain,delta,log(sign),exp(sign))};exports.panPow=function(domain,delta,exponent){return pan(domain,delta,pow(exponent),pow(1/exponent))};exports.panSymlog=function(domain,delta,constant){return pan(domain,delta,symlog(constant),symexp(constant))};exports.peek=peek;exports.quarter=function(date){return 1+
~~((new Date(date)).getMonth()/3)};exports.repeat=repeat;exports.span=function(array){return array&&peek(array)-array[0]||0};exports.splitAccessPath=splitAccessPath;exports.stringValue=$;exports.toBoolean=function(_){return null==_||""===_?null:_&&"false"!==_&&"0"!==_?!!_:!1};exports.toDate=function(_,parser){parser=parser||defaultParser;return null==_||""===_?null:parser(_)};exports.toNumber=toNumber;exports.toSet=function(_){const s={},n=_.length;for(let i=0;i<n;++i)s[_[i]]=!0;return s};exports.toString=
function(_){return null==_||""===_?null:_+""};exports.truncate=function(str,length,align,ellipsis){ellipsis=null!=ellipsis?ellipsis:"â€¦";str+="";const n=str.length,l=Math.max(0,length-ellipsis.length);return n<=length?str:"left"===align?ellipsis+str.slice(n-l):"center"===align?str.slice(0,Math.ceil(l/2))+ellipsis+str.slice(n-~~(l/2)):str.slice(0,l)+ellipsis};exports.truthy=truthy;exports.utcquarter=function(date){return 1+~~((new Date(date)).getUTCMonth()/3)};exports.visitArray=function(array,filter,
visitor){if(array)if(filter){const n=array.length;for(let i=0;i<n;++i){const t=filter(array[i]);t&&visitor(t,i,array)}}else array.forEach(visitor)};exports.writeConfig=writeConfig;exports.zero=zero;exports.zoomLinear=function(domain,anchor,scale){return zoom(domain,anchor,scale,toNumber,identity)};exports.zoomLog=function(domain,anchor,scale){const sign=Math.sign(domain[0]);return zoom(domain,anchor,scale,log(sign),exp(sign))};exports.zoomPow=function(domain,anchor,scale,exponent){return zoom(domain,
anchor,scale,pow(exponent),pow(1/exponent))};exports.zoomSymlog=function(domain,anchor,scale,constant){return zoom(domain,anchor,scale,symlog(constant),symexp(constant))};Object.defineProperty(exports,"__esModule",{value:!0})})}
//# sourceMappingURL=module$node_modules$vega_util$build$vega_util.js.map
