shadow$provide.module$node_modules$vega_time$build$vega_time=function(global$jscomp$0,require,module,exports$jscomp$0){(function(global,factory){"object"===typeof exports$jscomp$0&&"undefined"!==typeof module?factory(exports$jscomp$0,require("module$node_modules$vega_util$build$vega_util"),require("module$node_modules$d3_time$dist$d3_time"),require("module$node_modules$d3_array$dist$d3_array")):"function"===typeof define&&define.amd?define(["exports","vega-util","d3-time","d3-array"],factory):(global=
"undefined"!==typeof globalThis?globalThis:global||self,factory(global.vega={},global.vega,global.d3,global.d3))})(this,function(exports,vegaUtil,d3Time,d3Array){function timeUnits(units){const u=vegaUtil.array(units).slice(),m={};u.length||vegaUtil.error("Missing time unit.");u.forEach(unit=>{vegaUtil.hasOwnProperty(UNITS,unit)?m[unit]=1:vegaUtil.error(`Invalid time unit: ${unit}.`)});1<(m.week||m.day?1:0)+(m.quarter||m.month||m.date?1:0)+(m.dayofyear?1:0)&&vegaUtil.error(`Incompatible time units: ${units}`);
u.sort((a,b)=>UNITS[a]-UNITS[b]);return u}function localYear(y){t0.setFullYear(y);t0.setMonth(0);t0.setDate(1);t0.setHours(0,0,0,0);return t0}function localDayOfYear(d){return d3Time.timeDay.count(localYear(d.getFullYear())-1,d)}function localWeekNum(d){return d3Time.timeWeek.count(localYear(d.getFullYear())-1,d)}function localDate(y,m,d,H,M,S,L){return 0<=y&&100>y?(m=new Date(-1,m,d,H,M,S,L),m.setFullYear(y),m):new Date(y,m,d,H,M,S,L)}function utcDayOfYear(d){const y=Date.UTC(d.getUTCFullYear(),
0,1);return d3Time.utcDay.count(y-1,d)}function utcWeekNum(d){const y=Date.UTC(d.getUTCFullYear(),0,1);return d3Time.utcWeek.count(y-1,d)}function utcFirst(y){t0.setTime(Date.UTC(y,0,1));return t0.getUTCDay()}function utcDate(y,m,d,H,M,S,L){return 0<=y&&100>y?(y=new Date(Date.UTC(-1,m,d,H,M,S,L)),y.setUTCFullYear(d.y),y):new Date(Date.UTC(y,m,d,H,M,S,L))}function floor(units,step,get,inv,newDate){const s=step||1,b=vegaUtil.peek(units);step=(unit,p,key)=>{key=key||unit;return getUnit(get[key],inv[key],
unit===b&&s,p)};const t=new Date;units=vegaUtil.toSet(units);const y=units.year?step("year"):vegaUtil.constant(2012),m=units.month?step("month"):units.quarter?step("quarter"):vegaUtil.zero,d=units.week&&units.day?step("day",1,"weekday"):units.week?step("week",1):units.day?step("day",1):units.date?step("date",1):units.dayofyear?step("dayofyear",1):vegaUtil.one,H=units.hours?step("hours"):vegaUtil.zero,M=units.minutes?step("minutes"):vegaUtil.zero,S=units.seconds?step("seconds"):vegaUtil.zero,L=units.milliseconds?
step("milliseconds"):vegaUtil.zero;return function(v){t.setTime(+v);v=y(t);return newDate(v,m(t),d(t,v),H(t),M(t),S(t),L(t))}}function getUnit(f,inv,step,phase){const u=1>=step?f:phase?(d,y)=>phase+step*Math.floor((f(d,y)-phase)/step):(d,y)=>step*Math.floor(f(d,y)/step);return inv?(d,y)=>inv(u(d,y),y):u}function weekday(week,day,firstDay){return day+7*week-(firstDay+6)%7}const TIME_UNITS="year quarter month week date day dayofyear hours minutes seconds milliseconds".split(" "),UNITS=TIME_UNITS.reduce((o,
u,i)=>(o[u]=1+i,o),{}),defaultSpecifiers={["year"]:"%Y ",["quarter"]:"Q%q ",["month"]:"%b ",["date"]:"%d ",["week"]:"W%U ",["day"]:"%a ",["dayofyear"]:"%j ",["hours"]:"%H:00",["minutes"]:"00:%M",["seconds"]:":%S",["milliseconds"]:".%L",["year-month"]:"%Y-%m ",["year-month-date"]:"%Y-%m-%d ",["hours-minutes"]:"%H:%M"},t0=new Date,localGet={["year"]:d=>d.getFullYear(),["quarter"]:d=>Math.floor(d.getMonth()/3),["month"]:d=>d.getMonth(),["date"]:d=>d.getDate(),["hours"]:d=>d.getHours(),["minutes"]:d=>
d.getMinutes(),["seconds"]:d=>d.getSeconds(),["milliseconds"]:d=>d.getMilliseconds(),["dayofyear"]:d=>localDayOfYear(d),["week"]:d=>localWeekNum(d),["weekday"]:(d,y)=>weekday(localWeekNum(d),d.getDay(),localYear(y).getDay()),["day"]:(d,y)=>weekday(1,d.getDay(),localYear(y).getDay())},localInv={["quarter"]:q=>3*q,["week"]:(w,y)=>weekday(w,0,localYear(y).getDay())},utcGet={["year"]:d=>d.getUTCFullYear(),["quarter"]:d=>Math.floor(d.getUTCMonth()/3),["month"]:d=>d.getUTCMonth(),["date"]:d=>d.getUTCDate(),
["hours"]:d=>d.getUTCHours(),["minutes"]:d=>d.getUTCMinutes(),["seconds"]:d=>d.getUTCSeconds(),["milliseconds"]:d=>d.getUTCMilliseconds(),["dayofyear"]:d=>utcDayOfYear(d),["week"]:d=>utcWeekNum(d),["day"]:(d,y)=>weekday(1,d.getUTCDay(),utcFirst(y)),["weekday"]:(d,y)=>weekday(utcWeekNum(d),d.getUTCDay(),utcFirst(y))},utcInv={["quarter"]:q=>3*q,["week"]:(w,y)=>weekday(w,0,utcFirst(y))},timeIntervals={["year"]:d3Time.timeYear,["quarter"]:d3Time.timeMonth.every(3),["month"]:d3Time.timeMonth,["week"]:d3Time.timeWeek,
["date"]:d3Time.timeDay,["day"]:d3Time.timeDay,["dayofyear"]:d3Time.timeDay,["hours"]:d3Time.timeHour,["minutes"]:d3Time.timeMinute,["seconds"]:d3Time.timeSecond,["milliseconds"]:d3Time.timeMillisecond},utcIntervals={["year"]:d3Time.utcYear,["quarter"]:d3Time.utcMonth.every(3),["month"]:d3Time.utcMonth,["week"]:d3Time.utcWeek,["date"]:d3Time.utcDay,["day"]:d3Time.utcDay,["dayofyear"]:d3Time.utcDay,["hours"]:d3Time.utcHour,["minutes"]:d3Time.utcMinute,["seconds"]:d3Time.utcSecond,["milliseconds"]:d3Time.utcMillisecond},
Milli="year month date hours minutes seconds milliseconds".split(" "),Seconds=Milli.slice(0,-1),Minutes=Seconds.slice(0,-1),Hours=Minutes.slice(0,-1),Day=Hours.slice(0,-1),Month=["year","month"],Year=["year"],intervals=[[Seconds,1,1E3],[Seconds,5,5E3],[Seconds,15,15E3],[Seconds,30,3E4],[Minutes,1,6E4],[Minutes,5,3E5],[Minutes,15,9E5],[Minutes,30,18E5],[Hours,1,36E5],[Hours,3,108E5],[Hours,6,216E5],[Hours,12,432E5],[Day,1,864E5],[["year","week"],1,6048E5],[Month,1,2592E6],[Month,3,7776E6],[Year,1,
31536E6]];exports.DATE="date";exports.DAY="day";exports.DAYOFYEAR="dayofyear";exports.HOURS="hours";exports.MILLISECONDS="milliseconds";exports.MINUTES="minutes";exports.MONTH="month";exports.QUARTER="quarter";exports.SECONDS="seconds";exports.TIME_UNITS=TIME_UNITS;exports.WEEK="week";exports.YEAR="year";exports.dayofyear=function(d){return localDayOfYear(new Date(d))};exports.timeBin=function(opt){var ext=opt.extent;opt=opt.maxbins||40;var target=Math.abs(vegaUtil.span(ext))/opt;let i$jscomp$0=d3Array.bisector(i=>
i[2]).right(intervals,target);i$jscomp$0===intervals.length?(target=Year,ext=d3Array.tickStep(ext[0]/31536E6,ext[1]/31536E6,opt)):i$jscomp$0?(i$jscomp$0=intervals[target/intervals[i$jscomp$0-1][2]<intervals[i$jscomp$0][2]/target?i$jscomp$0-1:i$jscomp$0],target=i$jscomp$0[0],ext=i$jscomp$0[1]):(target=Milli,ext=Math.max(d3Array.tickStep(ext[0],ext[1],opt),1));return{units:target,step:ext}};exports.timeFloor=function(units,step){return floor(units,step||1,localGet,localInv,localDate)};exports.timeInterval=
function(unit){return timeIntervals[unit]};exports.timeOffset=function(unit,date,step){return(unit=timeIntervals[unit])?unit.offset(date,step):void 0};exports.timeSequence=function(unit,start,stop,step){return(unit=timeIntervals[unit])?unit.range(start,stop,step):void 0};exports.timeUnitSpecifier=function(units,specifiers){specifiers=vegaUtil.extend({},defaultSpecifiers,specifiers);units=timeUnits(units);const n=units.length;let fmt="",start,end,key;for(start=0;start<n;)for(end=units.length;end>start;--end)if(key=
units.slice(start,end).join("-"),null!=specifiers[key]){fmt+=specifiers[key];start=end;break}return fmt.trim()};exports.timeUnits=timeUnits;exports.utcFloor=function(units,step){return floor(units,step||1,utcGet,utcInv,utcDate)};exports.utcInterval=function(unit){return utcIntervals[unit]};exports.utcOffset=function(unit,date,step){return(unit=utcIntervals[unit])?unit.offset(date,step):void 0};exports.utcSequence=function(unit,start,stop,step){return(unit=utcIntervals[unit])?unit.range(start,stop,
step):void 0};exports.utcdayofyear=function(d){return utcDayOfYear(new Date(d))};exports.utcweek=function(d){return utcWeekNum(new Date(d))};exports.week=function(d){return localWeekNum(new Date(d))};Object.defineProperty(exports,"__esModule",{value:!0})})}
//# sourceMappingURL=module$node_modules$vega_time$build$vega_time.js.map
