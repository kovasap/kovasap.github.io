shadow$provide.module$node_modules$vega_format$build$vega_format=function(global$jscomp$0,require,module,exports$jscomp$0){(function(global,factory){"object"===typeof exports$jscomp$0&&"undefined"!==typeof module?factory(exports$jscomp$0,require("module$node_modules$d3_array$dist$d3_array"),require("module$node_modules$d3_format$dist$d3_format"),require("module$node_modules$vega_time$build$vega_time"),require("module$node_modules$vega_util$build$vega_util"),require("module$node_modules$d3_time_format$dist$d3_time_format")):
"function"===typeof define&&define.amd?define("exports d3-array d3-format vega-time vega-util d3-time-format".split(" "),factory):(global="undefined"!==typeof globalThis?globalThis:global||self,factory(global.vega={},global.d3,global.d3,global.vega,global.vega,global.d3))})(this,function(exports,d3Array,d3Format,vegaTime,vegaUtil,d3TimeFormat){function memoize(method){const cache={};return spec=>cache[spec]||(cache[spec]=method(spec))}function trimZeroes(numberFormat,decimalChar){return x=>{x=numberFormat(x);
const dec=x.indexOf(decimalChar);if(0>dec)return x;a:{var JSCompiler_inline_result=x.lastIndexOf("e");if(!(0<JSCompiler_inline_result)){for(JSCompiler_inline_result=x.length;--JSCompiler_inline_result>dec;){var c=x.charCodeAt(JSCompiler_inline_result);if(48<=c&&57>=c){JSCompiler_inline_result+=1;break a}}JSCompiler_inline_result=void 0}}for(c=JSCompiler_inline_result<x.length?x.slice(JSCompiler_inline_result):"";--JSCompiler_inline_result>dec;)if("0"!==x[JSCompiler_inline_result]){++JSCompiler_inline_result;
break}return x.slice(0,JSCompiler_inline_result)+c}}function numberLocale(locale){const format=memoize(locale.format),formatPrefix=locale.formatPrefix;return{format,formatPrefix,formatFloat(spec){spec=d3Format.formatSpecifier(spec||",");if(null==spec.precision){spec.precision=12;switch(spec.type){case "%":spec.precision-=2;break;case "e":--spec.precision}return trimZeroes(format(spec),format(".1f")(1)[1])}return format(spec)},formatSpan(start,stop,count,specifier){specifier=d3Format.formatSpecifier(null==
specifier?",f":specifier);count=d3Array.tickStep(start,stop,count);start=Math.max(Math.abs(start),Math.abs(stop));if(null==specifier.precision)switch(specifier.type){case "s":return isNaN(stop=d3Format.precisionPrefix(count,start))||(specifier.precision=stop),formatPrefix(specifier,start);case "":case "e":case "g":case "p":case "r":isNaN(stop=d3Format.precisionRound(count,start))||(specifier.precision=stop-("e"===specifier.type));break;case "f":case "%":isNaN(stop=d3Format.precisionFixed(count))||
(specifier.precision=stop-2*("%"===specifier.type))}return format(specifier)}}}function resetNumberFormatDefaultLocale(){return defaultNumberLocale=numberLocale({format:d3Format.format,formatPrefix:d3Format.formatPrefix})}function numberFormatLocale(definition){return numberLocale(d3Format.formatLocale(definition))}function numberFormatDefaultLocale(definition){return arguments.length?defaultNumberLocale=numberFormatLocale(definition):defaultNumberLocale}function timeMultiFormat(format,interval,spec){spec=
spec||{};vegaUtil.isObject(spec)||vegaUtil.error(`Invalid time multi-format specifier: ${spec}`);const second=interval(vegaTime.SECONDS),minute=interval(vegaTime.MINUTES),hour=interval(vegaTime.HOURS),day=interval(vegaTime.DATE),week=interval(vegaTime.WEEK),month=interval(vegaTime.MONTH),quarter=interval(vegaTime.QUARTER),year=interval(vegaTime.YEAR),L=format(spec[vegaTime.MILLISECONDS]||".%L"),S=format(spec[vegaTime.SECONDS]||":%S"),M=format(spec[vegaTime.MINUTES]||"%I:%M"),H=format(spec[vegaTime.HOURS]||
"%I %p"),d=format(spec[vegaTime.DATE]||spec[vegaTime.DAY]||"%a %d"),w=format(spec[vegaTime.WEEK]||"%b %d"),m=format(spec[vegaTime.MONTH]||"%B"),q=format(spec[vegaTime.QUARTER]||"%B"),y=format(spec[vegaTime.YEAR]||"%Y");return date=>(second(date)<date?L:minute(date)<date?S:hour(date)<date?M:day(date)<date?H:month(date)<date?week(date)<date?d:w:year(date)<date?quarter(date)<date?m:q:y)(date)}function timeLocale(locale){const timeFormat=memoize(locale.format),utcFormat=memoize(locale.utcFormat);return{timeFormat:spec=>
vegaUtil.isString(spec)?timeFormat(spec):timeMultiFormat(timeFormat,vegaTime.timeInterval,spec),utcFormat:spec=>vegaUtil.isString(spec)?utcFormat(spec):timeMultiFormat(utcFormat,vegaTime.utcInterval,spec),timeParse:memoize(locale.parse),utcParse:memoize(locale.utcParse)}}function resetTimeFormatDefaultLocale(){return defaultTimeLocale=timeLocale({format:d3TimeFormat.timeFormat,parse:d3TimeFormat.timeParse,utcFormat:d3TimeFormat.utcFormat,utcParse:d3TimeFormat.utcParse})}function timeFormatLocale(definition){return timeLocale(d3TimeFormat.timeFormatLocale(definition))}
function timeFormatDefaultLocale(definition){return arguments.length?defaultTimeLocale=timeFormatLocale(definition):defaultTimeLocale}function defaultLocale(numberSpec,timeSpec){var args=arguments.length;args&&2!==args&&vegaUtil.error("defaultLocale expects either zero or two arguments.");if(args){args=numberFormatDefaultLocale(numberSpec);var time=timeFormatDefaultLocale(timeSpec);args=vegaUtil.extend({},args,time)}else args=numberFormatDefaultLocale(),time=timeFormatDefaultLocale(),args=vegaUtil.extend({},
args,time);return args}let defaultNumberLocale;resetNumberFormatDefaultLocale();let defaultTimeLocale;resetTimeFormatDefaultLocale();exports.defaultLocale=defaultLocale;exports.locale=function(numberSpec,timeSpec){numberSpec=numberSpec?numberFormatLocale(numberSpec):numberFormatDefaultLocale();timeSpec=timeSpec?timeFormatLocale(timeSpec):timeFormatDefaultLocale();return vegaUtil.extend({},numberSpec,timeSpec)};exports.numberFormatDefaultLocale=numberFormatDefaultLocale;exports.numberFormatLocale=
numberFormatLocale;exports.resetDefaultLocale=function(){resetNumberFormatDefaultLocale();resetTimeFormatDefaultLocale();return defaultLocale()};exports.resetNumberFormatDefaultLocale=resetNumberFormatDefaultLocale;exports.resetTimeFormatDefaultLocale=resetTimeFormatDefaultLocale;exports.timeFormatDefaultLocale=timeFormatDefaultLocale;exports.timeFormatLocale=timeFormatLocale;Object.defineProperty(exports,"__esModule",{value:!0})})}
//# sourceMappingURL=module$node_modules$vega_format$build$vega_format.js.map
