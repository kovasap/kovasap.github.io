{
"version":3,
"file":"module$node_modules$d3_contour$src$density.js",
"lineCount":7,
"mappings":"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",
"sources":["node_modules/d3-contour/src/density.js"],
"sourcesContent":["shadow$provide[\"module$node_modules$d3_contour$src$density\"] = function(global,require,module,exports) {\n\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = _default;\n\nvar _d3Array = require(\"d3-array\");\n\nvar _array = require(\"./array.js\");\n\nvar _constant = _interopRequireDefault(require(\"./constant.js\"));\n\nvar _contours = _interopRequireDefault(require(\"./contours.js\"));\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction defaultX(d) {\n  return d[0];\n}\n\nfunction defaultY(d) {\n  return d[1];\n}\n\nfunction defaultWeight() {\n  return 1;\n}\n\nfunction _default() {\n  var x = defaultX,\n      y = defaultY,\n      weight = defaultWeight,\n      dx = 960,\n      dy = 500,\n      r = 20,\n      // blur radius\n  k = 2,\n      // log2(grid cell size)\n  o = r * 3,\n      // grid offset, to pad for blur\n  n = dx + o * 2 >> k,\n      // grid width\n  m = dy + o * 2 >> k,\n      // grid height\n  threshold = (0, _constant.default)(20);\n\n  function grid(data) {\n    var values = new Float32Array(n * m),\n        pow2k = Math.pow(2, -k),\n        i = -1;\n\n    for (const d of data) {\n      var xi = (x(d, ++i, data) + o) * pow2k,\n          yi = (y(d, i, data) + o) * pow2k,\n          wi = +weight(d, i, data);\n\n      if (xi >= 0 && xi < n && yi >= 0 && yi < m) {\n        var x0 = Math.floor(xi),\n            y0 = Math.floor(yi),\n            xt = xi - x0 - 0.5,\n            yt = yi - y0 - 0.5;\n        values[x0 + y0 * n] += (1 - xt) * (1 - yt) * wi;\n        values[x0 + 1 + y0 * n] += xt * (1 - yt) * wi;\n        values[x0 + 1 + (y0 + 1) * n] += xt * yt * wi;\n        values[x0 + (y0 + 1) * n] += (1 - xt) * yt * wi;\n      }\n    }\n\n    (0, _d3Array.blur2)({\n      data: values,\n      width: n,\n      height: m\n    }, r * pow2k);\n    return values;\n  }\n\n  function density(data) {\n    var values = grid(data),\n        tz = threshold(values),\n        pow4k = Math.pow(2, 2 * k); // Convert number of thresholds into uniform thresholds.\n\n    if (!Array.isArray(tz)) {\n      tz = (0, _d3Array.ticks)(Number.MIN_VALUE, (0, _d3Array.max)(values) / pow4k, tz);\n    }\n\n    return (0, _contours.default)().size([n, m]).thresholds(tz.map(d => d * pow4k))(values).map((c, i) => (c.value = +tz[i], transform(c)));\n  }\n\n  density.contours = function (data) {\n    var values = grid(data),\n        contours = (0, _contours.default)().size([n, m]),\n        pow4k = Math.pow(2, 2 * k),\n        contour = value => {\n      value = +value;\n      var c = transform(contours.contour(values, value * pow4k));\n      c.value = value; // preserve exact threshold value\n\n      return c;\n    };\n\n    Object.defineProperty(contour, \"max\", {\n      get: () => (0, _d3Array.max)(values) / pow4k\n    });\n    return contour;\n  };\n\n  function transform(geometry) {\n    geometry.coordinates.forEach(transformPolygon);\n    return geometry;\n  }\n\n  function transformPolygon(coordinates) {\n    coordinates.forEach(transformRing);\n  }\n\n  function transformRing(coordinates) {\n    coordinates.forEach(transformPoint);\n  } // TODO Optimize.\n\n\n  function transformPoint(coordinates) {\n    coordinates[0] = coordinates[0] * Math.pow(2, k) - o;\n    coordinates[1] = coordinates[1] * Math.pow(2, k) - o;\n  }\n\n  function resize() {\n    o = r * 3;\n    n = dx + o * 2 >> k;\n    m = dy + o * 2 >> k;\n    return density;\n  }\n\n  density.x = function (_) {\n    return arguments.length ? (x = typeof _ === \"function\" ? _ : (0, _constant.default)(+_), density) : x;\n  };\n\n  density.y = function (_) {\n    return arguments.length ? (y = typeof _ === \"function\" ? _ : (0, _constant.default)(+_), density) : y;\n  };\n\n  density.weight = function (_) {\n    return arguments.length ? (weight = typeof _ === \"function\" ? _ : (0, _constant.default)(+_), density) : weight;\n  };\n\n  density.size = function (_) {\n    if (!arguments.length) return [dx, dy];\n\n    var _0 = +_[0],\n        _1 = +_[1];\n\n    if (!(_0 >= 0 && _1 >= 0)) throw new Error(\"invalid size\");\n    return dx = _0, dy = _1, resize();\n  };\n\n  density.cellSize = function (_) {\n    if (!arguments.length) return 1 << k;\n    if (!((_ = +_) >= 1)) throw new Error(\"invalid cell size\");\n    return k = Math.floor(Math.log(_) / Math.LN2), resize();\n  };\n\n  density.thresholds = function (_) {\n    return arguments.length ? (threshold = typeof _ === \"function\" ? _ : Array.isArray(_) ? (0, _constant.default)(_array.slice.call(_)) : (0, _constant.default)(_), density) : threshold;\n  };\n\n  density.bandwidth = function (_) {\n    if (!arguments.length) return Math.sqrt(r * (r + 1));\n    if (!((_ = +_) >= 0)) throw new Error(\"invalid bandwidth\");\n    return r = (Math.sqrt(4 * _ * _ + 1) - 1) / 2, resize();\n  };\n\n  return density;\n}\n};"],
"names":["shadow$provide","global","require","module","exports","_interopRequireDefault","obj","__esModule","default","defaultX","d","defaultY","defaultWeight","Object","defineProperty","value","_default","grid","data","values","Float32Array","n","m","pow2k","Math","pow","k","i","xi","x","o","yi","y","wi","weight","x0","floor","y0","xt","yt","_d3Array","blur2","width","height","r","density","tz","threshold","pow4k","Array","isArray","ticks","Number","MIN_VALUE","max","_contours","size","thresholds","map","c","transform","geometry","coordinates","forEach","transformPolygon","transformRing","transformPoint","resize","dx","dy","_constant","contours","density.contours","contour","get","density.x","_","arguments","length","density.y","density.weight","density.size","_0","_1","Error","cellSize","density.cellSize","log","LN2","density.thresholds","_array","slice","call","bandwidth","density.bandwidth","sqrt"]
}
