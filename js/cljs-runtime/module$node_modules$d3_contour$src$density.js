shadow$provide.module$node_modules$d3_contour$src$density=function(global,require,module,exports){function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function defaultX(d){return d[0]}function defaultY(d){return d[1]}function defaultWeight(){return 1}Object.defineProperty(exports,"__esModule",{value:!0});exports.default=function(){function grid(data){var values=new Float32Array(n*m),pow2k=Math.pow(2,-k),i=-1;for(const d of data){var xi=(x(d,++i,data)+o)*pow2k,yi=(y(d,
i,data)+o)*pow2k,wi=+weight(d,i,data);if(0<=xi&&xi<n&&0<=yi&&yi<m){var x0=Math.floor(xi),y0=Math.floor(yi);xi=xi-x0-.5;yi=yi-y0-.5;values[x0+y0*n]+=(1-xi)*(1-yi)*wi;values[x0+1+y0*n]+=xi*(1-yi)*wi;values[x0+1+(y0+1)*n]+=xi*yi*wi;values[x0+(y0+1)*n]+=(1-xi)*yi*wi}}(0,_d3Array.blur2)({data:values,width:n,height:m},r*pow2k);return values}function density(data){data=grid(data);var tz=threshold(data),pow4k=Math.pow(2,2*k);Array.isArray(tz)||(tz=(0,_d3Array.ticks)(Number.MIN_VALUE,(0,_d3Array.max)(data)/
pow4k,tz));return(0,_contours.default)().size([n,m]).thresholds(tz.map(d=>d*pow4k))(data).map((c,i)=>(c.value=+tz[i],transform(c)))}function transform(geometry){geometry.coordinates.forEach(transformPolygon);return geometry}function transformPolygon(coordinates){coordinates.forEach(transformRing)}function transformRing(coordinates){coordinates.forEach(transformPoint)}function transformPoint(coordinates){coordinates[0]=coordinates[0]*Math.pow(2,k)-o;coordinates[1]=coordinates[1]*Math.pow(2,k)-o}function resize(){o=
3*r;n=dx+2*o>>k;m=dy+2*o>>k;return density}var x=defaultX,y=defaultY,weight=defaultWeight,dx=960,dy=500,r=20,k=2,o=3*r,n=dx+2*o>>k,m=dy+2*o>>k,threshold=(0,_constant.default)(20);density.contours=function(data){var values=grid(data),contours=(0,_contours.default)().size([n,m]),pow4k=Math.pow(2,2*k);data=value=>{value=+value;var c=transform(contours.contour(values,value*pow4k));c.value=value;return c};Object.defineProperty(data,"max",{get:()=>(0,_d3Array.max)(values)/pow4k});return data};density.x=
function(_){return arguments.length?(x="function"===typeof _?_:(0,_constant.default)(+_),density):x};density.y=function(_){return arguments.length?(y="function"===typeof _?_:(0,_constant.default)(+_),density):y};density.weight=function(_){return arguments.length?(weight="function"===typeof _?_:(0,_constant.default)(+_),density):weight};density.size=function(_){if(!arguments.length)return[dx,dy];var _0=+_[0],_1=+_[1];if(!(0<=_0&&0<=_1))throw Error("invalid size");return dx=_0,dy=_1,resize()};density.cellSize=
function(_){if(!arguments.length)return 1<<k;if(!(1<=(_=+_)))throw Error("invalid cell size");return k=Math.floor(Math.log(_)/Math.LN2),resize()};density.thresholds=function(_){return arguments.length?(threshold="function"===typeof _?_:Array.isArray(_)?(0,_constant.default)(_array.slice.call(_)):(0,_constant.default)(_),density):threshold};density.bandwidth=function(_){if(!arguments.length)return Math.sqrt(r*(r+1));if(!(0<=(_=+_)))throw Error("invalid bandwidth");return r=(Math.sqrt(4*_*_+1)-1)/2,
resize()};return density};var _d3Array=require("module$node_modules$d3_array$src$index"),_array=require("module$node_modules$d3_contour$src$array"),_constant=_interopRequireDefault(require("module$node_modules$d3_contour$src$constant")),_contours=_interopRequireDefault(require("module$node_modules$d3_contour$src$contours"))}
//# sourceMappingURL=module$node_modules$d3_contour$src$density.js.map
