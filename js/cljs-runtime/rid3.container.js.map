{"version":3,"sources":["rid3/container.cljs"],"mappings":";AAMA,iCAAA,jCAAMA,0EAAiBC,MAAMC,KAAKC;AAAlC,AACE,IAAAC,aACkCF;IADlCE,iBAAA,AAAAC,4BAAAD;SAAA,AAAAE,4CAAAF,eAAA,hEAAcI;YAAd,AAAAF,4CAAAF,eAAA,nEACcK;IADdF,aAKkCN;IALlCM,iBAAA,AAAAF,4BAAAE;aAAA,AAAAD,4CAAAC,eAAA,pEAEcG;gBAFd,AAAAJ,4CAAAC,eAAA,vEAGcI,qIACU,WAAKC,KAAKH;AAAV,AACEG;;IACpBA,OAA4B,AAACC,UAAa,AAACC,wBAAmBN,GAAGL;AANvE,eAOMS,AACA,YAAA,ZACA,sBAAA,QAAeF,7CACf,IAAAK;IAAAC,WAAWP;AAAX,AAAA,0FAAAM,SAAAC,gCAAAD,SAAAC,pIAACL,0CAAAA,6DAAAA;;AAGT,kCAAA,lCAAMM,4EAAkBhB,MAAMC,KAAKC;AAAnC,AACE,IAAAe,aAC2BhB;IAD3BgB,iBAAA,AAAAb,4BAAAa;SAAA,AAAAZ,4CAAAY,eAAA,hEAAcV;YAAd,AAAAF,4CAAAY,eAAA,nEACcT;IADdU,aAI2BlB;IAJ3BkB,iBAAA,AAAAd,4BAAAc;aAAA,AAAAb,4CAAAa,eAAA,pEAEcT;gBAFd,AAAAJ,4CAAAa,eAAA,vEAGcR;iBAHd,AAAAL,4CAAAa,eAAA,xEAIcC;IACRA,iBAAqB,iBAAAC,mBAAID;AAAJ,AAAA,oBAAAC;AAAAA;;AAAA,IAAAA,uBACIV;AADJ,AAAA,oBAAAU;AAAAA;;AAEI,kBAAKT,KAAKH;AAAV,AACEG;;;;;IAC3BA,OAAqB,AAACC,UAAa,0CAAA,zCAAK,AAACC,wBAAmBN,GAAGL,+DAClBO;AAVnD,AAWE,QAACU,+CAAAA,2DAAAA,dAAWR,uCAAAA,lCAAKH,uCAAAA","names":["rid3.container/piece-did-mount","piece","opts","prev-classes","map__41866","cljs.core/--destructure-map","cljs.core.get","map__41867","id","ratom","class","did-mount","node","js/d3.select","rid3.util/node-selector","G__41875","G__41876","rid3.container/piece-did-update","map__41880","map__41881","did-update","or__5045__auto__"],"sourcesContent":["(ns rid3.container\n  (:require\n   [cljsjs.d3]\n   [rid3.util :as util]))\n\n\n(defn piece-did-mount [piece opts prev-classes]\n  (let [{:keys [id\n                ratom]}             opts\n        {:keys [class\n                did-mount]\n         :or   {did-mount (fn [node ratom]\n                            node)}} piece\n        node                        (js/d3.select (util/node-selector id prev-classes))]\n    (-> node\n        (.append \"g\")\n        (.attr \"class\" class)\n        (did-mount ratom))))\n\n\n(defn piece-did-update [piece opts prev-classes]\n  (let [{:keys [id\n                ratom]}      opts\n        {:keys [class\n                did-mount\n                did-update]} piece\n        did-update           (or did-update\n                                 did-mount ;; sane-fallback\n                                 (fn [node ratom]\n                                   node))\n        node                 (js/d3.select (str (util/node-selector id prev-classes)\n                                                \" .\" class))]\n    (did-update node ratom)))\n"]}