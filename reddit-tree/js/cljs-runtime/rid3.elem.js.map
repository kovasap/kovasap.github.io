{"version":3,"sources":["rid3/elem.cljs"],"mappings":";AAMA,4BAAA,5BAAMA,gEAAiBC,MAAMC,KAAKC;AAAlC,AACE,IAAAC,aACkCF;IADlCE,iBAAA,AAAAC,4BAAAD;SAAA,AAAAE,4CAAAF,eAAA,hEAAcI;YAAd,AAAAF,4CAAAF,eAAA,nEACcK;IADdF,aAMkCN;IANlCM,iBAAA,AAAAF,4BAAAE;UAAA,AAAAD,4CAAAC,eAAA,jEAEcG;aAFd,AAAAJ,4CAAAC,eAAA,pEAGcI;gBAHd,AAAAL,4CAAAC,eAAA,vEAIcK,qIACU,WAAKC,KAAKJ;AAAV,AACEI;;IACpBA,OAA4B,AAACC,UAAa,AAACC,wBAAmBP,GAAGL;AAPvE,eAQMU,AACA,YAAA,ZACA,sBAAA,QAAeF,9BACf,6CAASD,5DACT,IAAAM;IAAAC,WAAWR;AAAX,AAAA,0FAAAO,SAAAC,gCAAAD,SAAAC,pIAACL,0CAAAA,6DAAAA;;AAGT,6BAAA,7BAAMM,kEAAkBjB,MAAMC,KAAKC;AAAnC,AACE,IAAAgB,aAC2BjB;IAD3BiB,iBAAA,AAAAd,4BAAAc;SAAA,AAAAb,4CAAAa,eAAA,hEAAcX;YAAd,AAAAF,4CAAAa,eAAA,nEACcV;IADdW,aAK2BnB;IAL3BmB,iBAAA,AAAAf,4BAAAe;UAAA,AAAAd,4CAAAc,eAAA,jEAEcV;aAFd,AAAAJ,4CAAAc,eAAA,pEAGcT;gBAHd,AAAAL,4CAAAc,eAAA,vEAIcR;iBAJd,AAAAN,4CAAAc,eAAA,xEAKcC;IACRA,iBAAqB,iBAAAC,mBAAID;AAAJ,AAAA,oBAAAC;AAAAA;;AAAA,IAAAA,uBACIV;AADJ,AAAA,oBAAAU;AAAAA;;AAEI,kBAAKT,KAAKJ;AAAV,AACEI;;;;;IAC3BA,OAAqB,AAACC,UAAa,0CAAA,zCAAK,AAACC,wBAAmBP,GAAGL,+DAClBQ;AAXnD,eAYME,AACA,YAASH,3BACT,IAAAa;IAAAC,WAAYf;AAAZ,AAAA,oGAAAc,SAAAC,qCAAAD,SAAAC,nJAACH,+CAAAA,kEAAAA","names":["rid3.elem/piece-did-mount","piece","opts","prev-classes","map__39881","cljs.core/--destructure-map","cljs.core.get","map__39882","id","ratom","tag","class","did-mount","node","js/d3.select","rid3.util/node-selector","G__39885","G__39886","rid3.elem/piece-did-update","map__39889","map__39890","did-update","or__4212__auto__","G__39893","G__39894"],"sourcesContent":["(ns rid3.elem\n  (:require\n   [cljsjs.d3]\n   [rid3.util :as util]))\n\n\n(defn piece-did-mount [piece opts prev-classes]\n  (let [{:keys [id\n                ratom]}             opts\n        {:keys [tag\n                class\n                did-mount]\n         :or   {did-mount (fn [node ratom]\n                            node)}} piece\n        node                        (js/d3.select (util/node-selector id prev-classes))]\n    (-> node\n        (.append \"g\")\n        (.attr \"class\" class)\n        (.append tag)\n        (did-mount ratom))))\n\n\n(defn piece-did-update [piece opts prev-classes]\n  (let [{:keys [id\n                ratom]}      opts\n        {:keys [tag\n                class\n                did-mount\n                did-update]} piece\n        did-update           (or did-update\n                                 did-mount ;; sane-fallback\n                                 (fn [node ratom]\n                                   node))\n        node                 (js/d3.select (str (util/node-selector id prev-classes)\n                                                \" .\" class))]\n    (-> node\n        (.select tag)\n        (did-update ratom))))\n"]}