shadow$provide.module$node_modules$d3_brush$src$brush=function(global,require,module,exports){function _getRequireWildcardCache(nodeInterop$jscomp$0){if("function"!==typeof WeakMap)return null;var cacheBabelInterop=new WeakMap,cacheNodeInterop=new WeakMap;return(_getRequireWildcardCache=function(nodeInterop){return nodeInterop?cacheNodeInterop:cacheBabelInterop})(nodeInterop$jscomp$0)}function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function number1(e){return[+e[0],
+e[1]]}function number2(e){return[number1(e[0]),number1(e[1])]}function type$jscomp$0(t){return{type:t}}function defaultFilter(event){return!event.ctrlKey&&!event.button}function defaultExtent(){var svg=this.ownerSVGElement||this;return svg.hasAttribute("viewBox")?(svg=svg.viewBox.baseVal,[[svg.x,svg.y],[svg.x+svg.width,svg.y+svg.height]]):[[0,0],[svg.width.baseVal.value,svg.height.baseVal.value]]}function defaultTouchable(){return navigator.maxTouchPoints||"ontouchstart"in this}function local(node){for(;!node.__brush;)if(!(node=
node.parentNode))return;return node.__brush}function brush(dim){function brush(group){var overlay=group.property("__brush",initialize).selectAll(".overlay").data([type$jscomp$0("overlay")]);overlay.enter().append("rect").attr("class","overlay").attr("pointer-events","all").attr("cursor",cursors.overlay).merge(overlay).each(function(){var extent=local(this).extent;(0,_d3Selection.select)(this).attr("x",extent[0][0]).attr("y",extent[0][1]).attr("width",extent[1][0]-extent[0][0]).attr("height",extent[1][1]-
extent[0][1])});group.selectAll(".selection").data([type$jscomp$0("selection")]).enter().append("rect").attr("class","selection").attr("cursor",cursors.selection).attr("fill","#777").attr("fill-opacity",.3).attr("stroke","#fff").attr("shape-rendering","crispEdges");overlay=group.selectAll(".handle").data(dim.handles,function(d){return d.type});overlay.exit().remove();overlay.enter().append("rect").attr("class",function(d){return"handle handle--"+d.type}).attr("cursor",function(d){return cursors[d.type]});
group.each(redraw).attr("fill","none").attr("pointer-events","all").on("mousedown.brush",started).filter(touchable).on("touchstart.brush",started).on("touchmove.brush",touchmoved).on("touchend.brush touchcancel.brush",touchended).style("touch-action","none").style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}function redraw(){var group=(0,_d3Selection.select)(this),selection=local(this).selection;selection?(group.selectAll(".selection").style("display",null).attr("x",selection[0][0]).attr("y",selection[0][1]).attr("width",
selection[1][0]-selection[0][0]).attr("height",selection[1][1]-selection[0][1]),group.selectAll(".handle").style("display",null).attr("x",function(d){return"e"===d.type[d.type.length-1]?selection[1][0]-handleSize/2:selection[0][0]-handleSize/2}).attr("y",function(d){return"s"===d.type[0]?selection[1][1]-handleSize/2:selection[0][1]-handleSize/2}).attr("width",function(d){return"n"===d.type||"s"===d.type?selection[1][0]-selection[0][0]+handleSize:handleSize}).attr("height",function(d){return"e"===
d.type||"w"===d.type?selection[1][1]-selection[0][1]+handleSize:handleSize})):group.selectAll(".selection,.handle").style("display","none").attr("x",null).attr("y",null).attr("width",null).attr("height",null)}function emitter(that,args,clean){var emit=that.__brush.emitter;return!emit||clean&&emit.clean?new Emitter(that,args,clean):emit}function Emitter(that,args,clean){this.that=that;this.args=args;this.state=that.__brush;this.active=0;this.clean=clean}function started(event$jscomp$0){function moved(event){for(var p of event.changedTouches||
[event])for(const d of points)d.identifier===p.identifier&&(d.cur=(0,_d3Selection.pointer)(p,that));!shifting||lockX||lockY||1!==points.length||(p=points[0],abs(p.cur[0]-p[0])>abs(p.cur[1]-p[1])?lockY=!0:lockX=!0);for(const point of points)point.cur&&(point[0]=point.cur[0],point[1]=point.cur[1]);moving=!0;(0,_noevent.default)(event);move(event)}function move(event){var point=points[0];const point0=point.point0;dx=point[0]-point0[0];dy=point[1]-point0[1];switch(mode){case MODE_SPACE:case MODE_DRAG:signX&&
(dx=max(W-w0,min(E-e0,dx)),w1=w0+dx,e1=e0+dx);signY&&(dy=max(N-n0,min(S-s0,dy)),n1=n0+dy,s1=s0+dy);break;case MODE_HANDLE:points[1]?(signX&&(w1=max(W,min(E,points[0][0])),e1=max(W,min(E,points[1][0])),signX=1),signY&&(n1=max(N,min(S,points[0][1])),s1=max(N,min(S,points[1][1])),signY=1)):(0>signX?(dx=max(W-w0,min(E-w0,dx)),w1=w0+dx,e1=e0):0<signX&&(dx=max(W-e0,min(E-e0,dx)),w1=w0,e1=e0+dx),0>signY?(dy=max(N-n0,min(S-n0,dy)),n1=n0+dy,s1=s0):0<signY&&(dy=max(N-s0,min(S-s0,dy)),n1=n0,s1=s0+dy));break;
case MODE_CENTER:signX&&(w1=max(W,min(E,w0-dx*signX)),e1=max(W,min(E,e0+dx*signX))),signY&&(n1=max(N,min(S,n0-dy*signY)),s1=max(N,min(S,s0+dy*signY)))}e1<w1&&(signX*=-1,point=w0,w0=e0,e0=point,point=w1,w1=e1,e1=point,type in flipX&&overlay.attr("cursor",cursors[type=flipX[type]]));s1<n1&&(signY*=-1,point=n0,n0=s0,s0=point,point=n1,n1=s1,s1=point,type in flipY&&overlay.attr("cursor",cursors[type=flipY[type]]));state.selection&&(selection=state.selection);lockX&&(w1=selection[0][0],e1=selection[1][0]);
lockY&&(n1=selection[0][1],s1=selection[1][1]);if(selection[0][0]!==w1||selection[0][1]!==n1||selection[1][0]!==e1||selection[1][1]!==s1)state.selection=[[w1,n1],[e1,s1]],redraw.call(that),emit.brush(event,mode.name)}function ended(event){(0,_noevent.nopropagation)(event);if(event.touches){if(event.touches.length)return;touchending&&clearTimeout(touchending);touchending=setTimeout(function(){touchending=null},500)}else(0,_d3Drag.dragEnable)(event.view,moving),view.on("keydown.brush keyup.brush mousemove.brush mouseup.brush",
null);group.attr("pointer-events","all");overlay.attr("cursor",cursors.overlay);state.selection&&(selection=state.selection);if(selection[0][0]===selection[1][0]||selection[0][1]===selection[1][1])state.selection=null,redraw.call(that);emit.end(event,mode.name)}function keydowned(event){switch(event.keyCode){case 16:shifting=signX&&signY;break;case 18:mode===MODE_HANDLE&&(signX&&(e0=e1-dx*signX,w0=w1+dx*signX),signY&&(s0=s1-dy*signY,n0=n1+dy*signY),mode=MODE_CENTER,move(event));break;case 32:if(mode===
MODE_HANDLE||mode===MODE_CENTER)0>signX?e0=e1-dx:0<signX&&(w0=w1-dx),0>signY?s0=s1-dy:0<signY&&(n0=n1-dy),mode=MODE_SPACE,overlay.attr("cursor",cursors.selection),move(event);break;default:return}(0,_noevent.default)(event)}function keyupped(event){switch(event.keyCode){case 16:shifting&&(lockX=lockY=shifting=!1,move(event));break;case 18:mode===MODE_CENTER&&(0>signX?e0=e1:0<signX&&(w0=w1),0>signY?s0=s1:0<signY&&(n0=n1),mode=MODE_HANDLE,move(event));break;case 32:mode===MODE_SPACE&&(event.altKey?
(signX&&(e0=e1-dx*signX,w0=w1+dx*signX),signY&&(s0=s1-dy*signY,n0=n1+dy*signY),mode=MODE_CENTER):(0>signX?e0=e1:0<signX&&(w0=w1),0>signY?s0=s1:0<signY&&(n0=n1),mode=MODE_HANDLE),overlay.attr("cursor",cursors[type]),move(event));break;default:return}(0,_noevent.default)(event)}if((!touchending||event$jscomp$0.touches)&&filter.apply(this,arguments)){var that=this,type=event$jscomp$0.target.__data__.type,mode="selection"===(keys&&event$jscomp$0.metaKey?type="overlay":type)?MODE_DRAG:keys&&event$jscomp$0.altKey?
MODE_CENTER:MODE_HANDLE,signX=dim===Y?null:signsX[type],signY=dim===X?null:signsY[type],state=local(that),extent=state.extent,selection=state.selection,W=extent[0][0],w0,N=extent[0][1],n0,E=extent[1][0],e0,S=extent[1][1],s0,dx=0,dy=0,moving,shifting=signX&&signY&&keys&&event$jscomp$0.shiftKey,lockX,lockY,points=Array.from(event$jscomp$0.touches||[event$jscomp$0],t=>{const i=t.identifier;t=(0,_d3Selection.pointer)(t,that);t.point0=t.slice();t.identifier=i;return t});(0,_d3Transition.interrupt)(that);
var emit=emitter(that,arguments,!0).beforestart();"overlay"===type?(selection&&(moving=!0),extent=[points[0],points[1]||points[0]],state.selection=selection=[[w0=dim===Y?W:min(extent[0][0],extent[1][0]),n0=dim===X?N:min(extent[0][1],extent[1][1])],[e0=dim===Y?E:max(extent[0][0],extent[1][0]),s0=dim===X?S:max(extent[0][1],extent[1][1])]],1<points.length&&move(event$jscomp$0)):(w0=selection[0][0],n0=selection[0][1],e0=selection[1][0],s0=selection[1][1]);var w1=w0;var n1=n0;var e1=e0;var s1=s0;var group=
(0,_d3Selection.select)(that).attr("pointer-events","none"),overlay=group.selectAll(".overlay").attr("cursor",cursors[type]);if(event$jscomp$0.touches)emit.moved=moved,emit.ended=ended;else{var view=(0,_d3Selection.select)(event$jscomp$0.view).on("mousemove.brush",moved,!0).on("mouseup.brush",ended,!0);if(keys)view.on("keydown.brush",keydowned,!0).on("keyup.brush",keyupped,!0);(0,_d3Drag.dragDisable)(event$jscomp$0.view)}redraw.call(that);emit.start(event$jscomp$0,mode.name)}}function touchmoved(event){emitter(this,
arguments).moved(event)}function touchended(event){emitter(this,arguments).ended(event)}function initialize(){var state=this.__brush||{selection:null};state.extent=number2(extent$jscomp$0.apply(this,arguments));state.dim=dim;return state}var extent$jscomp$0=defaultExtent,filter=defaultFilter,touchable=defaultTouchable,keys=!0,listeners=(0,_d3Dispatch.dispatch)("start","brush","end"),handleSize=6,touchending;brush.move=function(group,selection,event$jscomp$0){group.tween?group.on("start.brush",function(event){emitter(this,
arguments).beforestart().start(event)}).on("interrupt.brush end.brush",function(event){emitter(this,arguments).end(event)}).tween("brush",function(){function tween(t){state.selection=1===t&&null===selection1?null:i(t);redraw.call(that);emit.brush()}var that=this,state=that.__brush,emit=emitter(that,arguments),selection0=state.selection,selection1=dim.input("function"===typeof selection?selection.apply(this,arguments):selection,state.extent),i=(0,_d3Interpolate.interpolate)(selection0,selection1);
return null!==selection0&&null!==selection1?tween:tween(1)}):group.each(function(){var args=arguments,state=this.__brush,selection1=dim.input("function"===typeof selection?selection.apply(this,args):selection,state.extent);args=emitter(this,args).beforestart();(0,_d3Transition.interrupt)(this);state.selection=null===selection1?null:selection1;redraw.call(this);args.start(event$jscomp$0).brush(event$jscomp$0).end(event$jscomp$0)})};brush.clear=function(group,event){brush.move(group,null,event)};Emitter.prototype=
{beforestart:function(){1===++this.active&&(this.state.emitter=this,this.starting=!0);return this},start:function(event,mode){this.starting?(this.starting=!1,this.emit("start",event,mode)):this.emit("brush",event);return this},brush:function(event,mode){this.emit("brush",event,mode);return this},end:function(event,mode){0===--this.active&&(delete this.state.emitter,this.emit("end",event,mode));return this},emit:function(type,event,mode){var d=(0,_d3Selection.select)(this.that).datum();listeners.call(type,
this.that,new _event.default(type,{sourceEvent:event,target:brush,selection:dim.output(this.state.selection),mode,dispatch:listeners}),d)}};brush.extent=function(_){return arguments.length?(extent$jscomp$0="function"===typeof _?_:(0,_constant.default)(number2(_)),brush):extent$jscomp$0};brush.filter=function(_){return arguments.length?(filter="function"===typeof _?_:(0,_constant.default)(!!_),brush):filter};brush.touchable=function(_){return arguments.length?(touchable="function"===typeof _?_:(0,
_constant.default)(!!_),brush):touchable};brush.handleSize=function(_){return arguments.length?(handleSize=+_,brush):handleSize};brush.keyModifiers=function(_){return arguments.length?(keys=!!_,brush):keys};brush.on=function(){var value=listeners.on.apply(listeners,arguments);return value===listeners?brush:value};return brush}Object.defineProperty(exports,"__esModule",{value:!0});exports.brushSelection=function(node){return(node=node.__brush)?node.dim.output(node.selection):null};exports.brushX=function(){return brush(X)};
exports.brushY=function(){return brush(Y)};exports.default=function(){return brush(XY)};var _d3Dispatch=require("module$node_modules$d3_dispatch$src$index"),_d3Drag=require("module$node_modules$d3_drag$src$index"),_d3Interpolate=require("module$node_modules$d3_interpolate$src$index"),_d3Selection=require("module$node_modules$d3_selection$src$index"),_d3Transition=require("module$node_modules$d3_transition$src$index"),_constant=_interopRequireDefault(require("module$node_modules$d3_brush$src$constant")),
_event=_interopRequireDefault(require("module$node_modules$d3_brush$src$event")),_noevent=function(obj,nodeInterop){if(!nodeInterop&&obj&&obj.__esModule)return obj;if(null===obj||"object"!==typeof obj&&"function"!==typeof obj)return{default:obj};if((nodeInterop=_getRequireWildcardCache(nodeInterop))&&nodeInterop.has(obj))return nodeInterop.get(obj);var newObj={},hasPropertyDescriptor=Object.defineProperty&&Object.getOwnPropertyDescriptor,key;for(key in obj)if("default"!==key&&Object.prototype.hasOwnProperty.call(obj,
key)){var desc=hasPropertyDescriptor?Object.getOwnPropertyDescriptor(obj,key):null;desc&&(desc.get||desc.set)?Object.defineProperty(newObj,key,desc):newObj[key]=obj[key]}newObj.default=obj;nodeInterop&&nodeInterop.set(obj,newObj);return newObj}(require("module$node_modules$d3_brush$src$noevent")),MODE_DRAG={name:"drag"},MODE_SPACE={name:"space"},MODE_HANDLE={name:"handle"},MODE_CENTER={name:"center"};const {abs,max,min}=Math;var X={name:"x",handles:["w","e"].map(type$jscomp$0),input:function(x,e){return null==
x?null:[[+x[0],e[0][1]],[+x[1],e[1][1]]]},output:function(xy){return xy&&[xy[0][0],xy[1][0]]}},Y={name:"y",handles:["n","s"].map(type$jscomp$0),input:function(y,e){return null==y?null:[[e[0][0],+y[0]],[e[1][0],+y[1]]]},output:function(xy){return xy&&[xy[0][1],xy[1][1]]}},XY={name:"xy",handles:"n w e s nw ne sw se".split(" ").map(type$jscomp$0),input:function(xy){return null==xy?null:number2(xy)},output:function(xy){return xy}},cursors={overlay:"crosshair",selection:"move",n:"ns-resize",e:"ew-resize",
s:"ns-resize",w:"ew-resize",nw:"nwse-resize",ne:"nesw-resize",se:"nwse-resize",sw:"nesw-resize"},flipX={e:"w",w:"e",nw:"ne",ne:"nw",se:"sw",sw:"se"},flipY={n:"s",s:"n",nw:"sw",ne:"se",se:"ne",sw:"nw"},signsX={overlay:1,selection:1,n:null,e:1,s:null,w:-1,nw:-1,ne:1,se:1,sw:-1},signsY={overlay:1,selection:1,n:-1,e:null,s:1,w:null,nw:-1,ne:-1,se:1,sw:1}}
//# sourceMappingURL=module$node_modules$d3_brush$src$brush.js.map
